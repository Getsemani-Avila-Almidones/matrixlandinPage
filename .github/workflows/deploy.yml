# -----------------------------------------
# üì¶ .github/workflows/deploy.yml
# ‚öôÔ∏è Script: Automatiza el despliegue CI/CD de proyectos web est√°ticos (HTML, CSS, PHP) desde GitHub a servidor local
# üôç Autor: Getsemani √Åvila
# üìÖ Fecha: 2025-05-09
# üìù Descripci√≥n:
#   - Este workflow se activa con cada push a la rama main.
#   - Se conecta al servidor Ubuntu en red local usando SSH.
#   - Copia los archivos del repositorio a la ruta /var/www/html.
#   - Utiliza un usuario dedicado llamado 'github-action'.
#   - No expone el servidor a internet; funciona solo en red local.
# -----------------------------------------

name: Despliegue Web Local

on:
  push:
    branches: [ "main" ]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Clonar repositorio
      uses: actions/checkout@v3

    - name: Copiar archivos v√≠a SSH
      uses: appleboy/scp-action@v0.1.4
      with:
        host: ${{ secrets.SERVER_IP }}
        username: ${{ secrets.SERVER_USER }}
        key: ${{ secrets.SERVER_SSH_KEY }}
        source: "."
        target: "/var/www/html"
